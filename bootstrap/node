#!/bin/bash

set -e
export LANG=

# NodeInstall
echo '** BEGIN Install Node and npm'

sudo aptitude install -y daemon
sudo aptitude install -y -t unstable nodejs nodejs-dev

mkdir -p ~/Node
cd ~/Node
(
  sudo rm -rf npm/

  # Work over IPv6 with NEED_PROXY
  export http_proxy=${NEED_PROXY}
  export https_proxy=${NEED_PROXY}
  git clone http://github.com/isaacs/npm.git

  # curl http://stephane.shimaore.net/debian/src/npm-clean.tar.gz | tar xzvf -
  # mv npm-clean npm

  cd npm
  git submodule update --init --recursive
  sudo make install
)

sudo npm -g install coffee-script

echo '** END Install Node and npm Completed OK.'
