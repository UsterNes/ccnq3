Issue {issueClosedAt = Nothing, issueUpdatedAt = GithubDate {fromGithubDate = 2012-10-18 11:32:05 UTC}, issueHtmlUrl = "https://github.com/shimaore/ccnq3/issues/28", issueClosedBy = Nothing, issueLabels = [IssueLabel {labelColor = "02e10c", labelUrl = "https://api.github.com/repos/shimaore/ccnq3/labels/Feature", labelName = "Feature"}], issueNumber = 28, issueAssignee = Nothing, issueUser = GithubUser {githubOwnerAvatarUrl = "https://secure.gravatar.com/avatar/5b8c6fac3c1fecc69468c57f813d7bf3?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png", githubOwnerLogin = "shimaore", githubOwnerUrl = "https://api.github.com/users/shimaore", githubOwnerId = 55340, githubOwnerGravatarId = "5b8c6fac3c1fecc69468c57f813d7bf3"}, issueTitle = "Charging for call forwarding", issuePullRequest = PullRequestReference {pullRequestReferenceHtmlUrl = Nothing, pullRequestReferencePatchUrl = Nothing, pullRequestReferenceDiffUrl = Nothing}, issueUrl = "https://api.github.com/repos/shimaore/ccnq3/issues/28", issueCreatedAt = GithubDate {fromGithubDate = 2012-10-18 11:32:05 UTC}, issueBody = "`P-Charge-Info` for redirections is provided by the inbound SBC. This is not the best solution, ideally the `P-Charge-Info` on redirection should be provided e.g. in the `302` and re-used.\r\nActually: depending on business policies this can be arguable.\r\nIf an account is present in the local number record it may not be the same as the one present in the global number record. (For example because of authorization issues.)\r\nHowever, generally speaking, the account that is being charged for the incoming call is the one that is present in the global number record (since that's the one used to generate the inbound CDR).\r\nOn the other hand there can be security issues e.g. if a client-side SBC is opened to the public. In this case we still need to be able to provide an account number for redirection, and the only place to provide one securily is to use the local number record. (We had a similar issue when giving voicemail the capability to dial outbound calls.)\r\nAlternatively (if the `302` solution doesn't work -- I don't see how it would, how would we tell FreeSwitch to get the `P-Charge-Info` from the `302` and insert it into the new INVITE? What if the `302` isn't generated by the proxy, but by the customer, who would then be able to override the `P-Charge-Info`?)... the solution would be to run the call through a redirection server. (The original called-number is used to call the redirection server.) The redirection server does the lookup and inserts the `P-Charge-Info`.\r\nThis might also solve the issue of multiple redirections, where the audio path might not be easy to track (e.g. upstream-to-upstream redirections).\r\n\r\nAll-in-all, the fact of relying on data provided outside the client-side to charge a call breaks the Architectural model of independent carrier-side and client-side and needs to be fixed.\r\n", issueState = "open", issueId = 7683516, issueComments = 0, issueMilestone = Nothing}